<!doctype html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131298185-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-131298185-1');


    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Python++</title>

    <link rel="stylesheet" href="reveal/css/reveal.css">
    <link rel="stylesheet" href="reveal/css/theme/black.css" id="theme">
    <link rel="stylesheet" href="reveal/css/custom.css">
    <link rel="stylesheet" href="reveal/lib/css/solarized-dark.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal/css/print/pdf.css' : 'reveal/css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );


    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">

        <!-- Title -->
        <section>
            <h1>Python++</h1>
            <p><i>linux.conf.au 2019</i></p>
            <p>
                <small>Jan Groth</small>
            </p>
        </section>

        <!-- Intro -->
        <section>
            <section>
                <h2>About me</h2>
                <p>
                <ul>
                    <li>DevOps Engineer at Versent* in Sydney**</li>
                    <li>Developer Background</li>
                </ul>
                </p>
                <p>
                    <small>
                        (*) We are hiring<br/>
                        (**) In Sydney and Melbourne
                    </small>
                </p>
            </section>
            <section>
                <h2>About this talk</h2>
                <p>
                <ul class="fragment">
                    <li class="fragment strike">Here are 10 Python features, now start using them</li>
                    <li class="fragment">I'm not a Python guru</li>
                    <li class="fragment">Things that I found helpful when I switched to Python</li>
                </ul>
                </p>
            </section>
        </section>

        <!-- Python3 & venv -->
        <section>
            <section>
                <h2>What year is this?</h2>
                <ul>
                    <li class="fragment">Most popular movie: 'The Dark Knight'</li>
                    <li class="fragment">'Lehman Brothers' file for bankruptcy</li>
                    <li class="fragment">'Spotify' launches in Sweden</li>
                    <li class="fragment">Lady Gaga has two number-one singles with 'Just Dance' and 'Poker Face'</li>
                </ul>
            </section>
            <section>
                <h2>2008</h2>
            </section>
            <section>
                <blockquote>Python 3.0 was released on December 3, 2008.</blockquote>
                <blockquote>It was designed to rectify fundamental design flaws in the languageâ€”the changes required could not be implemented while retaining full backwards compatibility with the 2.x series, which necessitated a new major version number.</blockquote>
                <p>
                    <small>
                        Source: Wikipedia
                    </small>
                </p>
            </section>
            <section>
                <p>Best reason to stop using Python 2.7 now:</p>
                <iframe src="https://free.timeanddate.com/countdown/i6k6by43/n951/cf100/cm0/cu5/ct4/cs0/cacffffce/co0/cr0/ss0/cacfff/cpc000/pct/tcfff/fn3/fs250/szw576/szh243/iso2020-01-01T00:00:00/bas5/bacf00/pa10" allowTransparency="true" frameborder="0" width="605" height="272"></iframe>
            </section>
            <section>
                <h2>Python versions & dependencies</h2>
                <ul>
                    <li>Python environment <strong>per project</strong></li>
                    <ul>
                        <strong>Don't</strong> use the system environment
                    </ul>
                    <li>Dependencies as <strong>unspecific as possible</strong></li>
                    <ul>
                        <li>Only direct dependencies</li>
                        <li>Version numbers only when required</li>
                    </ul>
                </ul>
            </section>
            <section>
                <h2>requirements.txt</h2>
                <br/>
                <br/>
                <div class="left">
                    <pre data-badge="don't" data-badge-fg="red">
                        <code class="plaintext" data-trim data-noescape>
                            boto3==1.9.71
                            botocore==1.12.71
                            docutils==0.14
                            jmespath==0.9.3
                            python-dateutil==2.7.5
                            PyYAML==3.13
                            s3transfer==0.1.13
                            six==1.12.0
                            urllib3==1.24.1
                        </code>
                    </pre>
                </div>
                <div class="right">
                    <pre data-badge="instead" data-badge-fg="green">
                        <code class="plaintext" data-trim data-noescape>
                            boto3
                            PyYAML
                        </code>
                    </pre>
                </div>
            </section>
            <section data-background="#f7f2d3">
                <h2>Tip #1</h2>
                <p>Stay ahead of Python's versions</p>
                <ul>
                    <li>Use Python 3</li>
                    <li>Use a tool to manage dependencies</li>
                    <ul>
                        <li>venv</li>
                        <li>pipenv</li>
                        <li>docker & venv</li>
                    </ul>
                </ul>
            </section>
        </section>

        <!-- Conventions  & good naming -->
        <section data-state="changeToBlack">
            <section>
                <p>Why is touch-typing useful?</p>
            </section>
            <section>
                <pre>
                    <code class="python" data-trim data-noescape>
                        CONSTANTS_IN_UPPERCASE = 123

                        variables_are_lowercase = 'OH YES!'


                        def methods_are_lowercase_too():
                            pass


                        def all_use_kebap_case():
                            pass
                    </code>
                </pre>
            </section>
            <section>
                <p>Write once, read many times.</p>
                <p class="fragment">Let's talk about naming things...</p>
            </section>
            <section>
                <pre>
                    <code class="python" data-trim data-noescape>
                        # uses supplied credentials to create new sftp client
                        def sftp_client(username, password):
                            pass
                    </code>
                </pre>
            </section>
            <section>
                <pre>
                    <code class="python" data-trim data-noescape>
                        def sftp_client(username, password):
                            """
                            This method uses the supplied credentials to create a new sftp client.
                            """
                            pass
                    </code>
                </pre>
            </section>
            <section>
                <pre>
                    <code class="python" data-trim data-noescape>
                        def create_sftp_client(username, password):
                            """
                            This method uses the supplied credentials to create a new sftp client.
                            """
                            pass
                    </code>
                </pre>
            </section>
            <section>
                <pre>
                    <code class="python" data-trim data-noescape>
                        def create_sftp_client(username, password):
                            pass
                    </code>
                </pre>
            </section>
            <section>
                <pre data-badge="don't" data-badge-fg="red">
                    <code class="python" data-trim data-noescape>
                        # uses supplied credentials to create new sftp client
                        def sftp_client(username, password):
                            pass
                    </code>
                </pre>
                <pre data-badge="instead" data-badge-fg="green">
                    <code class="python" data-trim data-noescape>
                        def create_sftp_client(username, password):
                            pass
                    </code>
                </pre>
            </section>
            <section data-background="#f7f2d3">
                <h2>Tip #2</h2>
                <p>Use language conventions.</p>
                <p>Make an effort to find good names.</p>
            </section>
        </section>

        <!-- Beauty lies in simplicity -->
        <section>
            <section>
                There is beauty in simplicity.
            </section>
            <section>
                <div class="left">
                    <pre data-badge="don't" data-badge-fg="red">
                        <code class="python" data-trim data-noescape>
                            counter = 0
                            while counter < 5:
                                print(counter)
                                counter += 1
                        </code>
                    </pre>
                </div>
                <div class="right">
                    <pre data-badge="instead" data-badge-fg="green">
                        <code class="python" data-trim data-noescape>
                            for i in range(5):
                                print(i)
                        </code>
                    </pre>
                </div>
            </section>
            <section>
                Often, there is a 'pythonic' way
            </section>
            <section>
                <p>Using a loop to create a list</p>
                <pre>
                    <code class="python" data-trim data-noescape>
                        symbols = '$Â¢Â£Â¥â‚¬Â¤'

                        codes = []
                        for symbol in symbols:
                            codes.append(ord(symbol))

                        >>> [36, 162, 163, 165, 8364, 164]
                    </code>
                </pre>
            </section>
            <section>
                <p>The same, using list comprehension</p>
                <pre>
                    <code class="python" data-trim data-noescape>
                        codes = [ord(symbol) for symbol in symbols]
                    </code>
                </pre>
            </section>
            <section>
                    <pre data-badge="don't" data-badge-fg="red">
                        <code class="python" data-trim data-noescape>
                        symbols = '$Â¢Â£Â¥â‚¬Â¤'
                        codes = []
                        for symbol in symbols:
                            codes.append(ord(symbol))
                        </code>
                    </pre>
                    <pre data-badge="instead" data-badge-fg="green">
                        <code class="python" data-trim data-noescape>
                            symbols = '$Â¢Â£Â¥â‚¬Â¤'
                            codes = [ord(symbol) for symbol in symbols]
                        </code>
                    </pre>
            </section>

            <section>
                Commenting every single line can be a good thing...
            </section>
            <section data-transition="fade-in">
                <pre>
                    <code class="assembler" data-trim data-noescape>
                        clear:

                              mov       ah,15
                              int       10h

                              cmp       al,7
                              je        clear0
                              cmp       al,3
                              ja        clear9
                    </code>
                </pre>
            </section>
            <section data-transition="fade-in">
                <pre>
                    <code class="assembler" data-trim data-noescape>
                        clear:                      ; initialize display...
                                                    ; call BIOS video driver to
                              mov       ah,15       ; get current display mode:
                              int       10h         ; returns AL = mode, and
                                                    ; AH = no. of columns.
                              cmp       al,7        ; if we are in graphics modes
                              je        clear0      ; (modes 4,5,6) then exit
                              cmp       al,3        ; but if we are in mode 0-3
                              ja        clear9      ; or 7 then continue.
                    </code>
                </pre>
            </section>
            <section>
                ... but maybe not in Python.
            </section>
            <section data-transition="fade-in">
                <pre>
                    <code class="python" data-trim data-noescape>
                        def pfPasswordHash(arg):
                            # Randomise Salt
                            salt = os.urandom(6)
                            # Convert String to Byte Array
                            res = arg.encode()
                            # Hash through 10000 times.
                            for lp in range(10000):
                                # Always initialize hashlib, because [...]
                                m = hashlib.sha256()
                                # Swap between the two inputs into the digest based on loop number
                                m.update(res) if lp % 2 else m.update(salt)
                                m.update(salt) if lp % 2 else m.update(res)
                                # Finish the digest
                                res = m.digest()
                    </code>
                </pre>
            </section>
            <section data-transition="fade-in">
                <pre>
                    <code class="python" data-trim data-noescape>
                        def pfPasswordHash(arg):
                            <strike># Randomise Salt</strike>
                            salt = os.urandom(6)
                            <strike class="strike"># Convert String to Byte Array</strike>
                            res = arg.encode()
                            <strike class="strike"># Hash through 10000 times.</strike>
                            for lp in range(10000):
                                <mark># Always initialize hashlib, because [...]</mark>
                                m = hashlib.sha256()
                                <strike class="strike"># Swap between the two inputs into the digest based on loop number</strike>
                                m.update(res) if lp % 2 else m.update(salt)
                                m.update(salt) if lp % 2 else m.update(res)
                                <strike class="strike"># Finish the digest</strike>
                                res = m.digest()
                    </code>
                </pre>
            </section>
            <section data-background="#f7f2d3">
                <h2>Tip #3</h2>
                <p>Try to write code that is both, functional <strong>and</strong> simple.</p>
                <p>Use Python idioms where you can.</p>
                <p>Comment only what you cannot say in code.</p>
            </section>
        </section>

        <!-- Scope & classes -->
        <section>
            <section data-markdown>
          <textarea data-template>
            ## Scope & classes
            - example: one page script (no classes)
            - problems with this (data interacts with functions interact, but is not coupled)
            - solution: classes
            - design from api
            - benefits
            - TIP: encapsulate behaviour
          </textarea>
            </section>
            <section data-transition="fade-in">
        <pre><code data-trim data-noescape>
        class SftpToS3():

          <mark> def __init__(self, sftp_server, bucket_name): </mark>
            self.sftp_client   = self._get_sftp_client(â€¦)
            self.target_bucket = boto3.Bucket(bucket_name)

          def _get_sftp_client(self, value):Â 
            return â€¦
        </code></pre>
            </section>
            <section data-transition="fade-in">
        <pre><code data-trim data-noescape>
        class SftpToS3():

          def __init__(self, sftp_server, bucket_name):
           <mark>  self.sftp_client   = self._get_sftp_client(â€¦)</mark>
            self.target_bucket = boto3.Bucket(bucket_name)

          def _get_sftp_client(self, value):Â 
            return â€¦
        </code></pre>
            </section>
        </section>

        <!-- Use an IDE -->
        <section>
            <section data-markdown>
          <textarea data-template>
           ## Use an ide
           - helps finding compilation issues
           - debugger
           - clean up & formatting
           - TIP: Use an IDE
          </textarea>
            </section>
        </section>

        <!-- Language Features-->
        <section>
            <section data-markdown>
          <textarea data-template>
           ## Language features
           - decorator
           - cli
           - TIP: look around
          </textarea>
            </section>
        </section>

        <!-- Outro -->
        <section>
            <section data-markdown>
          <textarea data-template>
           ## Outro
          </textarea>
            </section>
            <section data-markdown>
          <textarea data-template>
           > Hereâ€™s the plan: when someone uses a feature you donâ€™t understand, simply shoot them. This is easier than learning something new, and before too long the only living coders will be writing in an easily understood, tiny subset of Python 0.9.6 <wink>

           - *Tim Peters, Legendary core developer and author of The Zen of Python*
          </textarea>
            </section>
        </section>

    </div>
</div>

<script src="reveal/lib/js/head.min.js"></script>
<script src="reveal/js/reveal.js"></script>
<script>
    Reveal.initialize({
        <!--symbolperslideprogress: {-->
            <!--position: "left", // left/right-->
            <!--align: "horizontal", // vertical/horizontal-->
            <!--symbolColor: "", // Colors like red/#ff0000/rgb(255, 0, 0)-->
            <!--symbolActiveColor: "",-->
        <!--},-->

        // presentation size
        width: 1280,
        height: 720,
        margin: 0.1,
        minScale: 0.2,
        maxScale: 1.5,

        // elapsed-time-bar
        allottedTime: 25 * 60 * 1000, // 25 minutes
        progressBarHeight: 5,

        // reveal
        history: true,
        progress: true,
        hideAddressBar: true,
        dependencies: [
                        { src: 'reveal/plugin/markdown/marked.js' },
                        { src: 'reveal/plugin/elapsed-time-bar/elapsed-time-bar.js' },
                        { src: 'reveal/plugin/markdown/markdown.js' },
                        { src: 'reveal/plugin/notes/notes.js', async: true },
                        { src: 'reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                        <!--{ src: 'reveal/plugin/symbol-per-slide-progress/symbol-per-slide-progress.js', async: true },-->
                        { src: 'reveal/plugin/elapsed-time-bar/elapsed-time-bar.js'},
                        { src: 'reveal/plugin/badges/badges.js'}
                    ]
        });


</script>
</body>
</html>
